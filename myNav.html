<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>我的导航</title>
	<link rel="stylesheet" href="./myNav.css">
</head>

<body>
	<main>
		<div id="main"></div>
	</main>

	<script>
		var init = {
			'0': ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],
			'1': ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],
			'2': ['z', 'x', 'c', 'v', 'b', 'n', 'm'],
			'length': 3
		}
		var hash = {
			'q' : 'qq.com',
			'w' : 'weibo.com',
			'r' : 'renren.com', 
			't' : 'taobao.com', 
			'y' : 'youku.com', 
			'i' : 'iqiyi.com', 
			'o' : 'opera.com', 
			's' : '', 
			'd' : '', 
			'f' : '', 
			'g' : 'google.com', 
			'h' : '', 
			'j' : 'jianshu.com', 
			'k' : 'kugou.com', 
			'l' : '',
			'z' : 'zhihu.com', 
			'x' : '', 
			'c' : 'csdn.net', 
			'v' : '', 
			'b' : 'baidu.com', 
			'n' : '', 
			'm' : ''
		}
		
		var index2 = 0
		var hashInLocalStorage = JSON.parse(localStorage.getItem('hash') || 'null')
		if(hashInLocalStorage){
			hash = hashInLocalStorage
		}
		while (index2 < init.length) {
			var index = 0
			var div = document.createElement('div')
			while (index < init[index2].length) {
				var kbd = document.createElement('kbd')
				kbd.textContent = init[index2][index]
				var button = document.createElement('button')
				button.textContent = '编辑'
				button.id = init[index2][index]
				button.onclick = function(event){
					var buttonId = event.target.id
					var newWebsite = prompt('请输入一个网址')
					hash[buttonId] = newWebsite
					localStorage.setItem('hash',JSON.stringify(hash))
				}
				kbd.appendChild(button)
				div.appendChild(kbd)
				index = index + 1
			}
			main.appendChild(div)
			index2 = index2 + 1
		}

		document.onkeypress = function(event){
			var key = event.key
			console.log(hash[key])
			if(hash[key] != undefined){
				website = 'http://' + hash[key]
				console.log(website)
				window.open(website,'_blank')
			}
		}

	</script>
</body>

</html>